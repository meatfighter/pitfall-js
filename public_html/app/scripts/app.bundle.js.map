{"version":3,"file":"app.bundle.js","mappings":"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","sources":["webpack://pitfall-js/./src/animate.ts","webpack://pitfall-js/./src/app.ts","webpack://pitfall-js/./src/death.ts","webpack://pitfall-js/./src/download.ts","webpack://pitfall-js/./src/game/game-state.ts","webpack://pitfall-js/./src/game/game.ts","webpack://pitfall-js/./src/game/harry.ts","webpack://pitfall-js/./src/game/map.ts","webpack://pitfall-js/./src/graphics.ts","webpack://pitfall-js/./src/input.ts","webpack://pitfall-js/./src/math.ts","webpack://pitfall-js/./src/progress.ts","webpack://pitfall-js/./src/screen.ts","webpack://pitfall-js/./src/sfx.ts","webpack://pitfall-js/./src/start.ts","webpack://pitfall-js/./src/store.ts","webpack://pitfall-js/./src/wake-lock.ts"],"sourcesContent":["import { update } from './game/game';\nimport { render } from './screen';\n\nconst FRAMES_PER_SECOND = 60;\nconst MILLIS_PER_FRAME = 1000 / FRAMES_PER_SECOND;\nconst MAX_UPDATES_WITHOUT_RENDER = 5;\n\nlet animationRunning = false;\nlet frameID = 0;\nlet previousTime = 0;\nlet lagTime = 0;\n\nexport function startAnimation() {\n    if (animationRunning) {\n        return;\n    }\n    animationRunning = true;\n    lagTime = 0;\n    frameID = requestAnimationFrame(renderAndUpdate);\n    previousTime = performance.now();\n}\n\nexport function stopAnimation() {\n    if (!animationRunning) {\n        return;\n    }\n    animationRunning = false;\n    cancelAnimationFrame(frameID);\n}\n\nexport function renderAndUpdate() {\n    if (!animationRunning) {\n        return;\n    }\n\n    frameID = requestAnimationFrame(renderAndUpdate);\n\n    render();\n\n    const currentTime = performance.now();\n    const elapsedTime = currentTime - previousTime;\n    previousTime = currentTime;\n    lagTime += elapsedTime;\n\n    let count = 0;\n    while ((lagTime >= MILLIS_PER_FRAME) && animationRunning) {\n        update();\n        lagTime -= MILLIS_PER_FRAME;\n        if (++count > MAX_UPDATES_WITHOUT_RENDER) {\n            lagTime = 0;\n            previousTime = performance.now();\n            break;\n        }\n    }\n}","import { enter as enterProgress } from \"./progress\";\nimport { enter as enterDeath } from \"./death\";\n\nexport function init() {\n    window.addEventListener('error', e => {\n        console.error(`Caught in global handler: ${e.message}`, {\n            source: e.filename,\n            lineno: e.lineno,\n            colno: e.colno,\n            error: e.error\n        });\n        e.preventDefault();\n        enterDeath();\n    });\n    window.addEventListener('unhandledrejection', e => e.preventDefault());\n    document.addEventListener('dblclick', e => e.preventDefault(), { passive: false });\n\n    enterProgress();\n}","let landscape = false;\r\n\r\nexport function enter() {\r\n    window.addEventListener('resize', windowResized);\r\n    window.addEventListener('touchmove', onTouchMove, { passive: false });\r\n\r\n    const mainElement = document.getElementById('main-content') as HTMLElement;\r\n    mainElement.innerHTML = '<div id=\"death-div\"><span id=\"fatal-error\">&#x1F480;</span></div>';\r\n\r\n    windowResized();\r\n}\r\n\r\nexport function exit() {\r\n    window.removeEventListener('resize', windowResized);\r\n    window.removeEventListener('touchmove', onTouchMove);\r\n}\r\n\r\nfunction onTouchMove(e: TouchEvent) {\r\n    e.preventDefault();\r\n}\r\n\r\nfunction windowResized() {\r\n    const deathDiv = document.getElementById('death-div') as HTMLDivElement;\r\n\r\n    deathDiv.style.top = deathDiv.style.left = deathDiv.style.transform = '';\r\n    deathDiv.style.display = 'none';\r\n\r\n    const innerWidth = window.innerWidth;\r\n    const innerHeight = window.innerHeight;\r\n    landscape = (innerWidth >= innerHeight);\r\n    deathDiv.style.display = 'flex';\r\n\r\n    if (landscape) {\r\n        const rect = deathDiv.getBoundingClientRect();\r\n        deathDiv.style.left = `${(innerWidth - rect.width) / 2}px`\r\n        deathDiv.style.top = `${(innerHeight - rect.height) / 2}px`;\r\n    } else {\r\n        deathDiv.style.transform = 'rotate(-90deg)';\r\n        const rect = deathDiv.getBoundingClientRect();\r\n        deathDiv.style.left = `${(innerWidth - rect.height) / 2}px`\r\n        deathDiv.style.top = `${(innerHeight - rect.width) / 2}px`;\r\n    }\r\n}","const MAX_FETCH_RETRIES = 5;\r\n\r\nexport type ProgressListener = (frac: number) => void;\r\n\r\nexport async function download(url: string, progressListener: ProgressListener) {\r\n    for (let i = MAX_FETCH_RETRIES - 1; i >= 0; --i) {\r\n        try {\r\n            const response = await fetch(url);\r\n            if (!response.ok) {\r\n                continue;\r\n            }\r\n            const contentLengthStr = response.headers.get('Content-Length');\r\n            if (!contentLengthStr) {\r\n                continue;\r\n            }\r\n            const contentLength = parseInt(contentLengthStr);\r\n            if (isNaN(contentLength) || contentLength <= 0) {\r\n                continue;\r\n            }\r\n            const body = response.body;\r\n            if (body === null) {\r\n                continue;\r\n            }\r\n\r\n            const reader = body.getReader();\r\n            const chunks = [];\r\n            let bytesReceived = 0;\r\n            while (true) {\r\n                const { done, value: chunk } = await reader.read();\r\n                if (done) {\r\n                    break;\r\n                }\r\n                chunks.push(chunk);\r\n                bytesReceived += chunk.length;\r\n                progressListener(bytesReceived / contentLength);\r\n            }\r\n\r\n            const uint8Array = new Uint8Array(bytesReceived);\r\n            let position = 0;\r\n            chunks.forEach(chunk => {\r\n                uint8Array.set(chunk, position);\r\n                position += chunk.length;\r\n            });\r\n            return uint8Array;\r\n        } catch (error) {\r\n            if (i === 0) {\r\n                throw error;\r\n            }\r\n        }\r\n    }\r\n    throw new Error(\"Failed to fetch.\");\r\n}","import { store, saveStore } from '@/store';\r\nimport { Harry } from './harry';\r\n\r\nexport class GameState {\r\n\r\n    harry = new Harry();\r\n    ox = 0;\r\n    nextOx = 0;\r\n    nextScene = 0;\r\n    lastNextScene = 0;\r\n    lastHarryUnderground = false;\r\n    sceneAlpha = 1;\r\n\r\n    lastMinOx = 0;\r\n\r\n    save() {\r\n        saveStore();\r\n    }\r\n}","import { GameState } from './game-state';\r\nimport { colors, Colors, Resolution, leavesSprites, branchesSprite, wallSprite } from '@/graphics';\r\nimport { map, Wall } from './map';\r\nimport { clamp, mod } from '@/math';\r\n\r\nconst SCENE_ALPHA_DELTA = 1 / 30;\r\n\r\nconst TRUNKS = [\r\n    [ 8, 40, 100, 132 ],\r\n    [ 16, 48, 92, 124 ],\r\n    [ 24, 56, 84, 116 ],\r\n    [ 28, 60, 80, 112 ],\r\n];\r\n\r\nlet gs: GameState;\r\n\r\nexport function resetGame() {\r\n    gs = new GameState();\r\n}\r\n\r\nexport function saveGame() {\r\n    gs.save();    \r\n}\r\n\r\nexport function update() {   \r\n    if (gs.sceneAlpha < 1) {\r\n        gs.sceneAlpha += SCENE_ALPHA_DELTA;\r\n        if (gs.sceneAlpha > 1) {\r\n            gs.sceneAlpha = 1;\r\n        }\r\n    }\r\n\r\n    gs.harry.update(gs);\r\n\r\n    const underground = gs.harry.isUnderground();\r\n    if (gs.lastHarryUnderground !== underground) {\r\n        gs.lastHarryUnderground = underground;\r\n        gs.lastNextScene = gs.nextScene;\r\n        gs.sceneAlpha = clamp(1 - gs.sceneAlpha, 0, 1);\r\n    }\r\n\r\n    gs.ox = Math.floor(gs.harry.x + gs.harry.laggyX - gs.harry.absoluteX) - 76;\r\n    if (gs.ox < 0) {\r\n        gs.nextOx = gs.ox + Resolution.WIDTH;        \r\n        gs.nextScene = gs.harry.scene - (underground ? 3 : 1);\r\n        if (gs.nextScene < 0) {\r\n            gs.nextScene += map.length;\r\n        }\r\n    } else {\r\n        gs.nextOx = gs.ox - Resolution.WIDTH;\r\n        gs.nextScene = gs.harry.scene + (underground ? 3 : 1);  \r\n        if (gs.nextScene >= map.length) {\r\n            gs.nextScene -= map.length;\r\n        }\r\n    }\r\n}\r\n\r\nfunction renderStrips(ctx: OffscreenCanvasRenderingContext2D) {\r\n    ctx.fillStyle = colors[Colors.GREEN];\r\n    ctx.fillRect(0, 51, Resolution.WIDTH, 60);\r\n    ctx.fillStyle = colors[Colors.LIGHT_YELLOW];\r\n    ctx.fillRect(0, 111, Resolution.WIDTH, 16);\r\n    ctx.fillStyle = colors[Colors.DARK_YELLOW];\r\n    ctx.fillRect(0, 127, Resolution.WIDTH, 15);\r\n    ctx.fillRect(0, 174, Resolution.WIDTH, 6);\r\n    ctx.fillStyle = colors[Colors.BLACK];\r\n    ctx.fillRect(0, 142, Resolution.WIDTH, 32);\r\n}\r\n\r\nfunction renderBackground(ctx: OffscreenCanvasRenderingContext2D, scene: number, ox: number) {\r\n    const { trees, ladder, holes, wall } = map[scene];\r\n    const trunks = TRUNKS[trees];\r\n    ctx.fillStyle = colors[Colors.DARK_BROWN];\r\n    for (let i = 3; i >= 0; --i) {\r\n        ctx.drawImage(branchesSprite, trunks[i] - 2 - ox, 51);\r\n        ctx.fillRect(trunks[i] - ox, 59, 4, 52);\r\n    }\r\n\r\n    if (ladder) {\r\n        ctx.fillStyle = colors[Colors.BLACK];\r\n        ctx.fillRect(68 - ox, 116, 8, 6);\r\n        ctx.fillRect(68 - ox, 127, 8, 15);\r\n        ctx.fillStyle = colors[Colors.DARK_YELLOW];\r\n        for (let i = 10, y = 130; i >= 0; --i, y += 4) {\r\n            ctx.fillRect(70 - ox, y, 4, 2);\r\n        }\r\n    }\r\n\r\n    if (holes) {\r\n        ctx.fillStyle = colors[Colors.BLACK];\r\n        ctx.fillRect(40 - ox, 116, 12, 6);\r\n        ctx.fillRect(40 - ox, 127, 12, 15);\r\n        ctx.fillRect(92 - ox, 116, 12, 6);\r\n        ctx.fillRect(92 - ox, 127, 12, 15);\r\n    }\r\n\r\n    switch(wall) {\r\n        case Wall.LEFT:\r\n            ctx.drawImage(wallSprite, 10 - ox, 142);\r\n            ctx.drawImage(wallSprite, 10 - ox, 158);\r\n            break;\r\n        case Wall.RIGHT:\r\n            ctx.drawImage(wallSprite, 128 - ox, 142);\r\n            ctx.drawImage(wallSprite, 128 - ox, 158);\r\n            break;\r\n    }\r\n}\r\n\r\nfunction renderLeaves(ctx: OffscreenCanvasRenderingContext2D, scene: number, ox: number) {\r\n    const { trees } = map[scene];\r\n    ctx.fillStyle = colors[Colors.DARK_GREEN];\r\n    ctx.fillRect(0, 0, Resolution.WIDTH, 51);\r\n    ctx.drawImage(leavesSprites[1][trees], 6, 0, 2, 4, - ox, 51, 8, 8);    \r\n    for (let i = 1; i < 5; ++i) {\r\n        ctx.drawImage(leavesSprites[(i & 1) ^ 1][trees], (i << 5) - ox - 24, 51, 32, 8);\r\n    }\r\n    ctx.drawImage(leavesSprites[0][trees], 0, 0, 4, 4, 136 - ox, 51, 16, 8);\r\n}\r\n\r\nexport function renderScreen(ctx: OffscreenCanvasRenderingContext2D) {\r\n    \r\n    renderStrips(ctx);\r\n\r\n    renderBackground(ctx, gs.harry.scene, gs.ox);\r\n    if (gs.sceneAlpha === 1) {\r\n        renderBackground(ctx, gs.nextScene, gs.nextOx);\r\n    } else {\r\n        ctx.globalAlpha = 1 - gs.sceneAlpha;\r\n        renderBackground(ctx, gs.lastNextScene, gs.nextOx);\r\n        ctx.globalAlpha = gs.sceneAlpha;\r\n        renderBackground(ctx, gs.nextScene, gs.nextOx);\r\n        ctx.globalAlpha = 1;\r\n    }\r\n\r\n    gs.harry.render(gs, ctx, gs.ox);\r\n\r\n    renderLeaves(ctx, gs.harry.scene, gs.ox);\r\n    if (gs.sceneAlpha === 1) {\r\n        renderLeaves(ctx, gs.nextScene, gs.nextOx);\r\n    } else {\r\n        ctx.globalAlpha = 1 - gs.sceneAlpha;\r\n        renderLeaves(ctx, gs.lastNextScene, gs.nextOx);\r\n        ctx.globalAlpha = gs.sceneAlpha;\r\n        renderLeaves(ctx, gs.nextScene, gs.nextOx);\r\n        ctx.globalAlpha = 1;\r\n    }\r\n}","import { harrySprites, Resolution } from '@/graphics';\r\nimport { GameState } from './game-state';\r\nimport { isDownPressed, isJumpPressed, isLeftPressed, isRightPressed, isUpPressed } from '@/input';\r\nimport { map, Wall } from './map';\r\n\r\nconst Y_UPPER_LEVEL = 119;\r\nconst Y_LOWER_LEVEL = 174;\r\nconst Y_HOLE_BOTTOM = 157;\r\n\r\nconst JUMP_ARC_BASE = 17;\r\nconst JUMP_ARC_HEIGHT = 11;\r\n\r\nconst T = JUMP_ARC_BASE;\r\nconst G = 2 * JUMP_ARC_HEIGHT / (T * T);\r\nconst VY0 = -G * T;\r\n\r\nenum State {    \r\n    GROUNDED,\r\n    STARTING_FALL,\r\n    FALLING,\r\n    ENDING_FALL,\r\n    CLIMBING,\r\n}\r\n\r\nexport class Harry {   \r\n    scene = 0;\r\n    absoluteX = 12;\r\n    laggyX = this.absoluteX;\r\n    x = this.absoluteX;\r\n    y = Y_UPPER_LEVEL;\r\n    vy = 0;\r\n    dir = 0;\r\n    sprite = 0;\r\n    runCounter = 0;\r\n    state = State.GROUNDED;\r\n    climbCounter = 0;\r\n    lastLeftPressed = false;\r\n    lastRightPressed = false;\r\n    lastJumpPressed = false;\r\n\r\n    incrementAbsoluteX(delta: number) {\r\n        this.absoluteX += delta;\r\n        // if (Math.floor(this.absoluteX - this.laggyX) === this.absoluteX - this.laggyX) {\r\n        //     if (this.absoluteX > this.laggyX) {\r\n        //         this.laggyX += .5;\r\n        //     } else if (this.absoluteX < this.laggyX) {\r\n        //         this.laggyX -= .5;\r\n        //     }\r\n        // }\r\n    }\r\n\r\n    isUnderground() {\r\n        return this.y > 146;\r\n    }\r\n\r\n    update(gs: GameState) {  \r\n        const upPressed = isUpPressed();\r\n        const downPressed = isDownPressed();\r\n        const rightPressed = isRightPressed();\r\n        const leftPressed = isLeftPressed(); \r\n        const jumpPressed = isJumpPressed();       \r\n\r\n        const { ladder, holes, wall } = map[this.scene];\r\n\r\n        if (this.state === State.GROUNDED && this.y === Y_UPPER_LEVEL && holes\r\n                && ((this.x >= 40 && this.x <= 51) || (this.x >= 92 && this.x <= 103))) {\r\n            this.vy = G;\r\n            this.state = State.STARTING_FALL;\r\n        }\r\n\r\n        if (this.state === State.GROUNDED) {\r\n            if (!this.lastJumpPressed && jumpPressed) {\r\n                this.vy = VY0;                \r\n                this.state = State.STARTING_FALL;\r\n            } \r\n        } \r\n       \r\n        if (this.state === State.STARTING_FALL) {\r\n            this.y += this.vy;\r\n            this.vy += G;\r\n            this.sprite = 2;\r\n            this.state = State.FALLING;\r\n        } else if (this.state === State.FALLING) {\r\n            const nextY = this.y + this.vy;\r\n            if (this.y <= Y_UPPER_LEVEL && nextY >= Y_UPPER_LEVEL \r\n                    && (!holes || this.x < 40 || this.x > 103 || (this.x > 51 && this.x < 92))) {\r\n                this.y = Y_UPPER_LEVEL;\r\n                this.vy = 0;\r\n                this.sprite = 2;\r\n                this.state = State.ENDING_FALL;\r\n            } else if (this.y <= Y_LOWER_LEVEL && nextY >= Y_LOWER_LEVEL) {\r\n                this.y = Y_LOWER_LEVEL;\r\n                this.vy = 0;\r\n                this.sprite = 2;\r\n                this.state = State.ENDING_FALL;\r\n            } else {\r\n                this.y += this.vy;\r\n                this.vy += G;\r\n                this.sprite = 5;\r\n            }\r\n        }\r\n\r\n        let shifting = false;\r\n        if (this.state === State.CLIMBING) {\r\n            if (this.y <= 142) {\r\n                if ((!this.lastRightPressed && rightPressed) \r\n                        || (this.y === 134 && upPressed && (rightPressed || (!leftPressed && this.dir === 0)))) {\r\n                    this.state = State.GROUNDED;\r\n                    const deltaX = 77 - this.x;                    \r\n                    this.incrementAbsoluteX(deltaX);\r\n                    this.x += deltaX;\r\n                    this.y = Y_UPPER_LEVEL;\r\n                    shifting = true;\r\n                    this.runCounter = 0;\r\n                    this.sprite = 0;\r\n                    this.dir = 0;\r\n                } else if ((!this.lastLeftPressed && leftPressed) \r\n                        || (this.y === 134 && upPressed && (leftPressed || (!rightPressed && this.dir === 1)))) {\r\n                    this.state = State.GROUNDED;\r\n                    const deltaX = 67 - this.x;\r\n                    this.incrementAbsoluteX(deltaX);\r\n                    this.x += deltaX;\r\n                    this.y = Y_UPPER_LEVEL;\r\n                    shifting = true;\r\n                    this.runCounter = 0;\r\n                    this.sprite = 0;\r\n                    this.dir = 1;\r\n                }\r\n            }\r\n            if (upPressed) {\r\n                if (this.y === 134) {\r\n                    this.climbCounter = 0;                    \r\n                } else if (++this.climbCounter >= 8) {\r\n                    this.climbCounter = 0;\r\n                    this.y -= 4;\r\n                    this.dir ^= 1;\r\n                }\r\n            } else if (downPressed) {\r\n                if (this.y === Y_LOWER_LEVEL) {\r\n                    this.state = State.GROUNDED;\r\n                } else if (++this.climbCounter >= 8) {\r\n                    this.climbCounter = 0;\r\n                    this.y += 4;\r\n                    this.dir ^= 1;\r\n                }\r\n            }            \r\n        } else if (rightPressed) {\r\n            let moveRight = true;\r\n            if (this.y >= 120 && ((wall === Wall.RIGHT && this.x === 127) || (wall === Wall.LEFT && this.x === 9))) {\r\n                moveRight = false;\r\n            } else if (this.y > Y_UPPER_LEVEL && this.y <= Y_HOLE_BOTTOM) {\r\n                if (this.x >= 40 && this.x <= 51) {\r\n                    if (this.x > 50.5) {\r\n                        moveRight = false;\r\n                    }\r\n                } else if (this.x >= 92 && this.x <= 103) {\r\n                    if (this.x > 102.5) {\r\n                        moveRight = false;\r\n                    }\r\n                }                \r\n            } \r\n            if (moveRight) {\r\n                this.absoluteX += .5;\r\n                this.x += .5;\r\n                if (this.x >= Resolution.WIDTH) {\r\n                    this.x -= Resolution.WIDTH;\r\n                    if (this.y > Y_UPPER_LEVEL) {\r\n                        this.scene += 3;\r\n                    } else {\r\n                        ++this.scene;\r\n                    }\r\n                    if (this.scene >= map.length) {\r\n                        this.scene -= map.length;\r\n                    }\r\n                }  \r\n                this.dir = 0;\r\n                shifting = true;\r\n            }\r\n        } else if (leftPressed) {\r\n            let moveLeft = true;\r\n            if (this.y >= 120 && ((wall === Wall.LEFT && this.x === 18) || (wall === Wall.RIGHT && this.x === 136))) {\r\n                moveLeft = false;\r\n            } else if (this.y > Y_UPPER_LEVEL && this.y <= Y_HOLE_BOTTOM) {\r\n                if (this.x >= 40 && this.x <= 51) {\r\n                    if (this.x < 40.5) {\r\n                        moveLeft = false;\r\n                    }\r\n                } else if (this.x >= 92 && this.x <= 103) {\r\n                    if (this.x < 92.5) {\r\n                        moveLeft = false;\r\n                    }\r\n                }                \r\n            }\r\n            if (moveLeft) {\r\n                this.absoluteX -= .5;\r\n                this.x -= .5;\r\n                if (this.x < 0) {\r\n                    this.x += Resolution.WIDTH;\r\n                    if (this.y > Y_UPPER_LEVEL) {\r\n                        this.scene -= 3;\r\n                    } else {\r\n                        --this.scene;\r\n                    }\r\n                    if (this.scene < 0) {\r\n                        this.scene += map.length;\r\n                    }\r\n                }\r\n                this.dir = 1;\r\n                shifting = true;\r\n            }\r\n        }\r\n        \r\n        if (ladder) {\r\n            if ((this.y <= Y_UPPER_LEVEL && this.y + G >= Y_UPPER_LEVEL && this.x >= 68 && this.x <= 75)\r\n                    || (this.state === State.GROUNDED && this.y === Y_UPPER_LEVEL && downPressed && this.x >= 64 \r\n                            && this.x <= 80)) {\r\n                this.state = State.CLIMBING;\r\n                const deltaX = 72 - this.x;\r\n                this.incrementAbsoluteX(deltaX);\r\n                this.x += deltaX;\r\n                this.y = 134;\r\n                this.sprite = 7\r\n                this.climbCounter = 0;\r\n            } else if ((this.state === State.GROUNDED && this.y === Y_LOWER_LEVEL && upPressed && this.x >= 64 \r\n                    && this.x <= 80)) {\r\n                this.state = State.CLIMBING;\r\n                const deltaX = 72 - this.x;\r\n                this.incrementAbsoluteX(deltaX);\r\n                this.x += deltaX;\r\n                this.sprite = 7\r\n                this.climbCounter = 0;\r\n            }\r\n        }\r\n\r\n        if (this.state === State.GROUNDED) {\r\n            if (shifting) {\r\n                if (this.runCounter === 0 && ++this.sprite === 6) {\r\n                    this.sprite = 1;\r\n                }\r\n                this.runCounter = (this.runCounter + 1) & 3;\r\n            } else {\r\n                this.runCounter = 0;\r\n                this.sprite = 0;\r\n            }\r\n        } else if (this.state === State.ENDING_FALL) {\r\n            this.runCounter = 0;\r\n            this.state = State.GROUNDED;\r\n        }\r\n\r\n        if (this.laggyX < this.absoluteX - 4) {\r\n            this.laggyX += .5;\r\n        } else if (this.laggyX > this.absoluteX + 4) {\r\n            this.laggyX -= .5;\r\n        }       \r\n\r\n        this.lastLeftPressed = leftPressed;\r\n        this.lastRightPressed = rightPressed;\r\n        this.lastJumpPressed = jumpPressed;\r\n    }\r\n\r\n    render(gs: GameState, ctx: OffscreenCanvasRenderingContext2D, ox: number) {\r\n        const sprite = harrySprites[this.dir][this.sprite];\r\n        const X = Math.floor(gs.harry.absoluteX - gs.harry.laggyX) + 72;\r\n        const Y = Math.floor(this.y - 22);\r\n        if (Y < 101 || Y >= 127) {\r\n            ctx.drawImage(sprite, X, Y);\r\n        } else {\r\n            if (Y < 122) {\r\n                ctx.drawImage(sprite, 0, 0, 8, 122 - Y, X, Y, 8, 122 - Y);\r\n            }\r\n            if (Y > 106) {\r\n                ctx.drawImage(sprite, 0, 127 - Y, 8, Y - 105, X, 127, 8, Y - 105);\r\n            }\r\n        }\r\n    }\r\n}","export const map = new Array<Scene>(255);\r\n\r\nexport enum Pit {    \r\n    TAR,\r\n    QUICKSAND,\r\n    CROCS,\r\n    SHIFTING_TAR,\r\n    SHIFTING_QUICKSAND,\r\n    NONE,\r\n}\r\n\r\nexport enum Treasure {\r\n    MONEY_BAG = 0,\r\n    SILVER_BRICK = 1,\r\n    GOLD_BRICK = 2,\r\n    DIAMOND_RING = 3,\r\n    NONE = 4,\r\n}\r\n\r\nexport enum Obsticles {\r\n    ONE_ROLLING_LOG = 0,\r\n    TWO_ROLLING_LOGS_CLOSE = 1,\r\n    TWO_ROLLING_LOGS_FAR = 2,\r\n    THREE_ROLLING_LOGS = 3,\r\n    ONE_STATIONARY_LOG = 4,\r\n    THREE_STATIONARY_LOGS = 5,\r\n    FIRE = 6,\r\n    RATTLESNAKE = 7,\r\n    NONE = 8,\r\n}\r\n\r\nexport enum Wall {\r\n    LEFT = 0,\r\n    RIGHT = 1,\r\n    NONE = 2,\r\n}\r\n\r\nexport class Scene {\r\n    constructor(public trees: number,\r\n                public ladder: boolean,\r\n                public holes: boolean,\r\n                public vine: boolean,\r\n                public pit: Pit,\r\n                public treasure: Treasure,\r\n                public obsticles: Obsticles,\r\n                public wall: Wall,\r\n                public scorpion: boolean) {\r\n    }\r\n}\r\n\r\nlet seed = 0xC4;\r\nfor (let i = 0; i < map.length; ++i) {  \r\n    const trees = seed >> 6;\r\n    let ladder = false;\r\n    let holes = false;\r\n    let vine = false;\r\n    let pit = Pit.NONE;\r\n    let treasure = Treasure.NONE;\r\n    let obsticles = Obsticles.NONE;\r\n    let wall = Wall.NONE;\r\n    switch ((seed >> 3) & 7) {\r\n        case 0:\r\n            ladder = true;\r\n            break;\r\n        case 1:\r\n            ladder = true;\r\n            holes = true;\r\n            break;\r\n        case 2:\r\n            vine = true;\r\n            pit = Pit.TAR;            \r\n            break;\r\n        case 3:\r\n            vine = true;\r\n            pit = Pit.QUICKSAND;\r\n            break;\r\n        case 4:\r\n            vine = ((seed >> 1) & 1) === 1;\r\n            pit = Pit.CROCS;\r\n            break;\r\n        case 5:\r\n            pit = Pit.SHIFTING_TAR;\r\n            treasure = seed & 3;\r\n            break;\r\n        case 6:\r\n            pit = Pit.SHIFTING_TAR;\r\n            vine = true;\r\n            break;\r\n        case 7:\r\n            pit = Pit.SHIFTING_QUICKSAND;\r\n            break;                            \r\n    }\r\n    if (treasure === Treasure.NONE && pit !== Pit.CROCS) {\r\n        obsticles = seed & 7;\r\n    }\r\n    if (ladder) {\r\n        wall = (seed >> 7) & 1;\r\n    }\r\n    map[i] = new Scene(trees, ladder, holes, vine, pit, treasure, obsticles, wall, !ladder);\r\n\r\n    seed = 0xFF & ((seed << 1) | (((seed >> 7) & 1) ^ ((seed >> 5) & 1) ^ ((seed >> 4) & 1) ^ ((seed >> 3) & 1)));\r\n}","class RGBColor {\r\n    constructor(public readonly r: number, public readonly g: number, public readonly b: number) {        \r\n    }\r\n}\r\n\r\nexport type Sprite = ImageBitmap;\r\nexport type Mask = boolean[][];\r\n\r\nexport enum Resolution {\r\n    WIDTH = 152,\r\n    HEIGHT = 180,\r\n}\r\n\r\nexport enum PhysicalDimensions {\r\n    WIDTH = 4 * 152 / 160,\r\n    HEIGHT = 3 * 180 / 228,\r\n}\r\n\r\nexport enum Colors {\r\n    BROWN = 0x12,\r\n    YELLOW = 0x1e,\r\n    ORANGE = 0x3e,\r\n    RED = 0x48,\r\n    GREEN = 0xd6,\r\n    BLUE = 0xa4,\r\n    YELLOW_GREEN = 0xc8,\r\n    PINK = 0x4a,\r\n    BLACK = 0x00,\r\n    GREY = 0x06,\r\n    WHITE = 0x0e,\r\n    DARK_GREEN = 0xd2,\r\n    DARK_RED = 0x42,\r\n    DARK_YELLOW = 0x14,\r\n    LIGHT_YELLOW = 0x18,\r\n    DARK_BROWN = 0x10,    \r\n}\r\n\r\nexport const colors: string[] = new Array<string>(256);\r\n\r\nexport const harrySprites: Sprite[][] = new Array<Sprite[]>(2); // direction, sprite\r\nexport const harryMasks: Mask[][] = new Array<Mask[]>(2); // direction, mask\r\n\r\nexport const cobraSprites: Sprite[][] = new Array<Sprite[]>(2); // direction, sprite\r\nexport const cobraMasks: Mask[][] = new Array<Mask[]>(2); // direction, mask\r\n\r\nexport const crocSprites: Sprite[][] = new Array<Sprite[]>(2); // direction, sprite\r\nexport const crocMasks: Mask[][] = new Array<Mask[]>(2); // direction, mask\r\n\r\nexport const sorpionSprites: Sprite[][] = new Array<Sprite[]>(2); // direction, sprite\r\nexport const sorpionMasks: Mask[][] = new Array<Mask[]>(2); // direction, mask\r\n\r\nexport const leavesSprites: Sprite[][] = new Array<Sprite[]>(2); // direction, sprite\r\n\r\nexport const logSprites: Sprite[] = new Array<Sprite>(2);\r\nexport const logMasks: Mask[] = new Array<Mask>(2);\r\n\r\nexport const fireSprites: Sprite[] = new Array<Sprite>(2);\r\nexport const fireMasks: Mask[] = new Array<Mask>(2);\r\n\r\nexport const goldSprites: Sprite[] = new Array<Sprite>(2);\r\nexport const goldMasks: Mask[] = new Array<Mask>(2);\r\n\r\nexport const silverSprites: Sprite[] = new Array<Sprite>(2);\r\nexport const silverMasks: Mask[] = new Array<Mask>(2);\r\n\r\nexport let moneySprite: Sprite;\r\nexport let moneyMask: Mask;\r\n\r\nexport let ringSprite: Sprite;\r\nexport let ringMask: Mask;\r\n\r\nexport let wallSprite: Sprite;\r\n\r\nexport let branchesSprite: Sprite;\r\n\r\nexport const charSprites: Sprite[][] = new Array<Sprite[]>(256); // color, character\r\n\r\nexport const pitSprites: Sprite[][] = new Array<Sprite[]>(2); // color (0=black, 1=blue), sprite (0=bottom, 1=top)\r\n\r\nasync function createSprite(width: number, height: number, callback: (imageData: ImageData) => void):\r\n        Promise<{ imageBitmap: Sprite, imageData: ImageData }> {\r\n    return new Promise(resolve => {\r\n        const imageData = new ImageData(width, height);\r\n        callback(imageData);\r\n        createImageBitmap(imageData).then(imageBitmap => resolve({ imageBitmap, imageData }));\r\n    });\r\n}\r\n\r\nfunction createMask(imageData: ImageData): Mask {\r\n    const mask = new Array<boolean[]>(imageData.height);\r\n    const { data } = imageData;\r\n    for (let y = 0, i = 3; y < imageData.height; ++y) {\r\n        mask[y] = new Array<boolean>(imageData.width);\r\n        for (let x = 0; x < imageData.width; ++x, i += 4) {\r\n            mask[y][x] = data[i] !== 0;\r\n        }\r\n    }\r\n    return mask;\r\n}\r\n\r\nfunction createSpriteAndMask(binStr: string, palette: RGBColor[], spriteOffset: number, colorOffset: number, \r\n        height: number, flipped: boolean, spriteCallback: (sprite: Sprite) => void, \r\n        maskCallback: ((mask: Mask) => void) | null, promises: Promise<any>[]) {\r\n\r\n    promises.push(createSprite(8, height, imageData => {\r\n        if (flipped) {\r\n            for (let y = 0; y < height; ++y) {\r\n                const offset = height - 1 - y;\r\n                const byte = binStr.charCodeAt(spriteOffset + offset);\r\n                const color = palette[binStr.charCodeAt(colorOffset + offset)];\r\n                for (let x = 0, mask = 0x01; x < 8; ++x, mask <<= 1) {\r\n                    if ((byte & mask) !== 0) {\r\n                        setColor(imageData, x, y, color);\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            for (let y = 0; y < height; ++y) {\r\n                const offset = height - 1 - y;\r\n                const byte = binStr.charCodeAt(spriteOffset + offset);\r\n                const color = palette[binStr.charCodeAt(colorOffset + offset)];\r\n                for (let x = 0, mask = 0x80; x < 8; ++x, mask >>= 1) {\r\n                    if ((byte & mask) !== 0) {\r\n                        setColor(imageData, x, y, color);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }).then(({ imageBitmap, imageData }) => {\r\n        spriteCallback(imageBitmap);\r\n        if (maskCallback) {\r\n            maskCallback(createMask(imageData));\r\n        }\r\n    }));        \r\n}\r\n\r\nfunction extractPalette(): RGBColor[] {\r\n    const palette = new Array<RGBColor>(256);\r\n    const binStr = atob('AAAAPz8+ZGRjhISDoqKhurq50tLR6urpPT0AXl4Ke3sVmZkgtLQqzc005uY+/f1IcSMAhj0LmVcYrW8mvYYyzZs+3LBJ6s'\r\n        + 'JUhhUAmi8OrkgewGEv0Xc+4I1N76Jb/bVoigAAnhMSsSgnwj080lFQ4mRj73V0/YaFeQBYjRJuoCeEsTuYwE6q0GG83XHM6oLcRQB4XRKPci'\r\n        + 'ekiDu5m07KrmHcv3Hs0IL7DgCFKROZQyitXT2/dFHQi2TfoXXutYb7AACKEhOdJCiwNz3BSVHRWmTganXueYb7ABV9EjGTJEynN2e7SYDMWp'\r\n        + 'fdaq7tecL7ACdYEkV0JGKNN36nSZe+WrDUasfoed37ADUmEldCJHZdN5V2SbGOWsylauW7ef3PADkAE1sSKHknPZc8UbNQZM1jdeZ0hv2FDj'\r\n        + 'IAK1QRR3MjY5M2fbBIlctZreVpwv14Jy4ARU4PYmshfogzl6NDsLxTx9Ri3epwPSMAXkINe18dmXsttJY7za9K5sdX/d1k');         \r\n    for (let i = 0x00; i <= 0xFF; ++i) {       \r\n        const j = 3 * (i >> 1);\r\n        const col = new RGBColor(binStr.charCodeAt(j), binStr.charCodeAt(j + 1), binStr.charCodeAt(j + 2));\r\n        palette[i] = col;\r\n        colors[i] = `#${((col.r << 16) | (col.g << 8) | col.b).toString(16).padStart(6, '0')}`;\r\n    }\r\n    return palette;\r\n}\r\n\r\nfunction setColor(imageData: ImageData, x: number, y: number, color: RGBColor) {\r\n    const offset = 4 * (y * imageData.width + x);\r\n    const data = imageData.data;\r\n    data[offset] = color.r;\r\n    data[offset + 1] = color.g;\r\n    data[offset + 2] = color.b;\r\n    data[offset + 3] = 0xFF;\r\n}\r\n\r\nexport async function init() {\r\n\r\n    enum Offsets {\r\n        CLIMBCOLTAB = 0,\r\n        RUNCOLTAB = 22,\r\n        LOGCOLOR = 43,\r\n        FIRECOLOR = 59,\r\n        COBRACOLOR = 75,\r\n        CROCOCOLOR = 91,\r\n        MONEYBAGCOLOR = 107,\r\n        SCORPIONCOLOR = 123,\r\n        WALLCOLOR = 139,\r\n        RINGCOLOR = 155,\r\n        GOLDBARCOLOR = 171,\r\n        SILVERBARCOLOR = 187,\r\n        LEAVESCOLOR = 203,\r\n        BRANCHESCOLOR = 207,\r\n        LEAVES0 = 215,\r\n        LEAVES1 = 219,\r\n        LEAVES2 = 223,\r\n        LEAVES3 = 227,\r\n        HARRY0 = 231,\r\n        HARRY1 = 253,\r\n        HARRY2 = 275,\r\n        HARRY3 = 297,\r\n        HARRY4 = 319,\r\n        HARRY5 = 341,\r\n        HARRY6 = 363,\r\n        HARRY7 = 385,\r\n        BRANCHES = 407,\r\n        PIT = 415,\r\n        LOG0 = 420,\r\n        FIRE0 = 436,\r\n        COBRA0 = 452,\r\n        COBRA1 = 468,\r\n        CROCO0 = 484,\r\n        CROCO1 = 500,\r\n        MONEYBAG = 516,\r\n        SCORPION0 = 532,\r\n        SCORPION1 = 548,\r\n        WALL = 564,\r\n        BAR0 = 580,\r\n        BAR1 = 596,\r\n        RING = 612,\r\n        ZERO = 628,\r\n        ONE = 636,\r\n        TWO = 644,\r\n        THREE = 652,\r\n        FOUR = 660,\r\n        SIX = 676,\r\n        SEVEN = 684,\r\n        EIGHT = 692,\r\n        NINE = 700,\r\n        COLON = 708,\r\n    }\r\n\r\n    const palette = extractPalette();\r\n\r\n    const binStr = atob('0tLS0tLS0tLS0tLSyMjIyMjISkpKEtLS0tLS0tLS0tLIyMjIyMjISkpKEhISEhISEhISEhISEhISEhISEhISEj4+Pi4uLi'\r\n        + '4uLi4uAAAGAAYAAAAAAAAAAABCQtLS0tLS0tLS0tLS0tLS0tIGBgYGBgYGBgYGBgYSBgYGDg4ODg4ODg4ODg4ODg4ODgZCQkIGQkJCBkJCQg'\r\n        + 'ZCQkJCQh4eHh4eHh4eDg4ODg4OHh4eHh4eHh4ODg4ODg4ODgYGBgYGBgYODg4ODg4ODg7S0tLSEBAQEBAQEBABg8//ABg9fxi8/v8wePz+AA'\r\n        + 'AAAAAzctoeHBhYWHw+GhgQGBgYAACAgMNiYjY+HBgYPD46OBgYEBgYGAAQICIkNDIWHhwYGBwcGBgYGBAYGBgADAgoKD4KDhwYGBwcGBgYGB'\r\n        + 'gQGBgYAAACQ0R0FBwcGBgYPD46OBgYEBgYGAAYEBwYGBgYGBgYGBgcHhoYGBAYGBgAAAAAAAAAY/L23MDAwMDA8NCQ0NDAADAQEBAWFBQWEh'\r\n        + 'YeHBg4ODweGgIYGBh+25mZmZmZmQABAw9/ABgkWlpaZn5edn5edjwYAADD5348GDx8fHg4ODAwEBAA/vn5+flgEAgMDAg4MEAAAP75+fr6YB'\r\n        + 'AIDAwIODCAAAAAAAAA/6sDAwsuuuCAAAAAAAAAAP+rVf8GBAAAAAAAAD53d2N7Y29jNjYcCBw2AIUyPXj4xoKQiNhwAAAAAABJMzx4+sSSiN'\r\n        + 'hwAAAAAAAA/rq6uv7u7u7+urq6/u7u7gD4/P7+fj4AEABUAJIAEAAA+Pz+/n4+AAAoAFQAEAAAAAA4bERERGw4EDh8OAAAADxmZmZmZmY8PB'\r\n        + 'gYGBgYOBh+YGA8BgZGPDxGBgwMBkY8DAwMfkwsHAx8RgYGfGBgfjxmZmZ8YGI8GBgYGAwGQn48ZmY8PGZmPDxGBj5mZmY8ABgYAAAYGAA=');\r\n\r\n    const promises: Promise<any>[] = [];\r\n\r\n    for (let dir = 0; dir < 2; ++dir) {\r\n        const flipped = dir === 1;\r\n\r\n        // leaves\r\n        leavesSprites[dir] = new Array<Sprite>(4);\r\n        for (let i = 0; i < 4; ++i) {\r\n            createSpriteAndMask(binStr, palette, Offsets.LEAVES0 + 4 * i, Offsets.LEAVESCOLOR, 4, flipped,\r\n                sprite => leavesSprites[dir][i] = sprite, null, promises);\r\n        }\r\n\r\n        // harry\r\n        harrySprites[dir] = new Array<Sprite>(8);\r\n        harryMasks[dir] = new Array<Mask>(8);\r\n        for (let i = 0; i < 8; ++i) {\r\n            const j = (i <= 5) ? 5 - i : i;\r\n            createSpriteAndMask(binStr, palette, Offsets.HARRY0 + 22 * i, \r\n                    (i === 7) ? Offsets.CLIMBCOLTAB : Offsets.RUNCOLTAB, 22, flipped, \r\n                    sprite => harrySprites[dir][j] = sprite, mask => harryMasks[dir][j] = mask, promises);\r\n        }        \r\n\r\n        // cobra\r\n        cobraSprites[dir] = new Array<Sprite>(2);\r\n        cobraMasks[dir] = new Array<Mask>(2);\r\n        createSpriteAndMask(binStr, palette, Offsets.COBRA1, Offsets.COBRACOLOR, 16, flipped,\r\n                sprite => cobraSprites[dir][0] = sprite, mask => cobraMasks[dir][0] = mask, promises);\r\n        createSpriteAndMask(binStr, palette, Offsets.COBRA0, Offsets.COBRACOLOR, 16, flipped,\r\n                sprite => cobraSprites[dir][1] = sprite, mask => cobraMasks[dir][1] = mask, promises);\r\n\r\n        // croc\r\n        crocSprites[dir] = new Array<Sprite>(2);\r\n        crocMasks[dir] = new Array<Mask>(2);\r\n        createSpriteAndMask(binStr, palette, Offsets.CROCO1, Offsets.CROCOCOLOR, 16, flipped,\r\n                sprite => crocSprites[dir][0] = sprite, mask => crocMasks[dir][0] = mask, promises);\r\n        createSpriteAndMask(binStr, palette, Offsets.CROCO0, Offsets.CROCOCOLOR, 16, flipped,\r\n                sprite => crocSprites[dir][1] = sprite, mask => crocMasks[dir][1] = mask, promises);\r\n\r\n        // sorpion\r\n        sorpionSprites[dir] = new Array<Sprite>(2);\r\n        sorpionMasks[dir] = new Array<Mask>(2);\r\n        createSpriteAndMask(binStr, palette, Offsets.SCORPION1, Offsets.SCORPIONCOLOR, 16, flipped,\r\n                sprite => sorpionSprites[dir][0] = sprite, mask => sorpionMasks[dir][0] = mask, promises);\r\n        createSpriteAndMask(binStr, palette, Offsets.SCORPION0, Offsets.SCORPIONCOLOR, 16, flipped,\r\n                sprite => sorpionSprites[dir][1] = sprite, mask => sorpionMasks[dir][1] = mask, promises);\r\n    }\r\n\r\n    // log\r\n    createSpriteAndMask(binStr, palette, Offsets.LOG0, Offsets.LOGCOLOR, 16, true,\r\n            sprite => logSprites[0] = sprite, mask => logMasks[0] = mask, promises);\r\n    createSpriteAndMask(binStr, palette, Offsets.LOG0, Offsets.LOGCOLOR, 16, false,\r\n            sprite => logSprites[1] = sprite, mask => logMasks[1] = mask, promises);\r\n            \r\n    // fire\r\n    createSpriteAndMask(binStr, palette, Offsets.FIRE0, Offsets.FIRECOLOR, 16, true,\r\n            sprite => fireSprites[0] = sprite, mask => fireMasks[0] = mask, promises);\r\n    createSpriteAndMask(binStr, palette, Offsets.FIRE0, Offsets.FIRECOLOR, 16, false,\r\n            sprite => fireSprites[1] = sprite, mask => fireMasks[1] = mask, promises);\r\n\r\n    // gold\r\n    createSpriteAndMask(binStr, palette, Offsets.BAR1, Offsets.GOLDBARCOLOR, 16, false,\r\n            sprite => goldSprites[0] = sprite, mask => goldMasks[0] = mask, promises);\r\n    createSpriteAndMask(binStr, palette, Offsets.BAR0, Offsets.GOLDBARCOLOR, 16, false,\r\n            sprite => goldSprites[1] = sprite, mask => goldMasks[1] = mask, promises);\r\n    \r\n    // silver\r\n    createSpriteAndMask(binStr, palette, Offsets.BAR1, Offsets.SILVERBARCOLOR, 16, false,\r\n            sprite => silverSprites[0] = sprite, mask => silverMasks[0] = mask, promises);\r\n    createSpriteAndMask(binStr, palette, Offsets.BAR0, Offsets.SILVERBARCOLOR, 16, false,\r\n            sprite => silverSprites[1] = sprite, mask => silverMasks[1] = mask, promises);\r\n\r\n    // money\r\n    createSpriteAndMask(binStr, palette, Offsets.MONEYBAG, Offsets.MONEYBAGCOLOR, 16, false, \r\n            sprite => moneySprite = sprite, mask => moneyMask = mask, promises);\r\n\r\n    // ring\r\n    createSpriteAndMask(binStr, palette, Offsets.RING, Offsets.RINGCOLOR, 16, false, sprite => ringSprite = sprite, \r\n            mask => ringMask = mask, promises);\r\n\r\n    // wall\r\n    createSpriteAndMask(binStr, palette, Offsets.WALL, Offsets.WALLCOLOR, 16, false, sprite => wallSprite = sprite, \r\n            null, promises);\r\n\r\n    // branches\r\n    createSpriteAndMask(binStr, palette, Offsets.BRANCHES, Offsets.BRANCHESCOLOR, 8, false, \r\n            sprite => branchesSprite = sprite, null, promises);    \r\n\r\n    // characters        \r\n    for (let color = 0; color < 256; ++color) {        \r\n        const charCol = palette[color];\r\n        charSprites[color] = new Array<Sprite>(11);\r\n        for (let char = 0; char < 11; ++char) {\r\n            promises.push(createSprite(8, 8, imageData => {\r\n                const offset = Offsets.ZERO + 8 * (char + 1) - 1;\r\n                for (let y = 0; y < 8; ++y) {\r\n                    const byte = binStr.charCodeAt(offset - y);\r\n                    for (let x = 0, mask = 0x80; x < 8; ++x, mask >>= 1) {\r\n                        if ((byte & mask) !== 0) {\r\n                            setColor(imageData, x, y, charCol);\r\n                        }\r\n                    }\r\n                }\r\n            }).then(({ imageBitmap }) => charSprites[color][char] = imageBitmap));        \r\n        }\r\n    }\r\n\r\n    // pits\r\n    for (let color = 0; color < 2; ++color) {\r\n        const pitCol = palette[color === 0 ? Colors.BLACK : Colors.BLUE];\r\n        pitSprites[color] = new Array<Sprite>(2);\r\n        for (let sprite = 0; sprite < 2; ++sprite) {\r\n            promises.push(createSprite(64, 5, imageData => {\r\n                for (let y = 0; y < 5; ++y) {\r\n                    const Y = (sprite === 0) ? y : 4 - y;\r\n                    const byte = binStr.charCodeAt(Offsets.PIT);\r\n                    for (let x = 0, mask = 0x80, x4 = 0; x < 8; ++x, mask >>= 1, x4 += 4) {\r\n                        if ((byte & mask) === 0) {\r\n                            for (let i = 0; i < 4; ++i) {\r\n                                const X = x4 + i;\r\n                                setColor(imageData, X, Y, pitCol);\r\n                                setColor(imageData, 63 - X, Y, pitCol);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }).then(({ imageBitmap }) => pitSprites[color][sprite] = imageBitmap));\r\n        }\r\n    }\r\n    \r\n    await Promise.all(promises);\r\n}","import { exit } from '@/screen';\r\n\r\nlet leftKeyPressed = 0;\r\nlet rightKeyPressed = 0;\r\nlet upKeyPressed = 0;\r\nlet downKeyPressed = 0;\r\nlet jumpKeyPressed = false;\r\n\r\n// let leftScreenTouched = false;\r\n// let rightScreenTouched = false;\r\n\r\nlet hideCursorTimeoutId: number | null = null;\r\nlet cursorHidden = false;\r\n\r\n// let lastLeftGamepadDown = false;\r\n// let lastRightGamepadDown = false;\r\n// let lastFireGamepadDown = false;\r\n\r\nclass TouchData {\r\n    timestampDown = 0;\r\n    xDown = 0;\r\n    yDown = 0;\r\n    x = 0;\r\n    y = 0;\r\n}\r\n\r\nconst touchDatas: Map<number, TouchData> = new Map();\r\n\r\nexport function resetInput() {\r\n    leftKeyPressed = 0;\r\n    rightKeyPressed = 0;\r\n    upKeyPressed = 0;\r\n    downKeyPressed = 0;\r\n    jumpKeyPressed = false; \r\n    \r\n    // leftScreenTouched = false;\r\n    // rightScreenTouched = false;\r\n\r\n    touchDatas.clear();\r\n}\r\n\r\nexport function isTouchOnlyDevice(): boolean {\r\n    const supportsTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;\r\n    const supportsHover = window.matchMedia('(hover: hover)').matches;\r\n    const isCoarsePointer = window.matchMedia('(pointer: coarse)').matches;\r\n    return supportsTouch && !supportsHover && isCoarsePointer;\r\n}\r\n\r\nexport function startInput() {\r\n    window.addEventListener('click', onClick);\r\n    window.addEventListener('mousemove', resetHideCursorTimer);\r\n    window.addEventListener('mouseenter', resetHideCursorTimer);\r\n    window.addEventListener('mouseleave', cancelHideCursorTimer);\r\n    resetHideCursorTimer();\r\n\r\n    window.addEventListener('touchstart', onTouch, { passive: false });\r\n    window.addEventListener('touchmove', onTouch, { passive: false });\r\n    window.addEventListener('touchend', onTouch, { passive: false });\r\n    window.addEventListener('touchcancel', onTouch, { passive: false });\r\n\r\n    window.addEventListener('keydown', onKeyDown);\r\n    window.addEventListener('keyup', onKeyUp);\r\n\r\n    resetInput();   \r\n}\r\n\r\nexport function stopInput() {\r\n    window.removeEventListener('click', onClick);\r\n    window.removeEventListener('mousemove', resetHideCursorTimer);\r\n    window.removeEventListener('mouseenter', resetHideCursorTimer);\r\n    window.removeEventListener('mouseleave', cancelHideCursorTimer);\r\n    cancelHideCursorTimer();\r\n\r\n    window.removeEventListener('keydown', onKeyDown);\r\n    window.removeEventListener('keyup', onKeyUp);\r\n\r\n    window.removeEventListener('touchstart', onTouch);\r\n    window.removeEventListener('touchmove', onTouch);\r\n    window.removeEventListener('touchend', onTouch);\r\n    window.removeEventListener('touchcancel', onTouch);\r\n\r\n    resetInput();\r\n}\r\n\r\nexport function updateInput() {\r\n    // const gamepads = navigator.getGamepads();\r\n    // if (!gamepads) {\r\n    //     return;\r\n    // }\r\n\r\n    // let leftDown = false;\r\n    // let rightDown = false;\r\n    // let fireDown = false;\r\n    // for (let i = gamepads.length - 1; i >= 0; --i) {\r\n    //     const gamepad = gamepads[i];\r\n    //     if (!gamepad) {\r\n    //         continue;            \r\n    //     } \r\n\r\n    //     // D-pad left or left shoulder or left stick\r\n    //     if (gamepad.buttons[14]?.pressed || gamepad.buttons[4]?.pressed || gamepad.buttons[10]?.pressed) {\r\n    //         leftDown = true;\r\n    //     }\r\n\r\n    //     // D-pad right or right shoulder or right stick\r\n    //     if (gamepad.buttons[15]?.pressed || gamepad.buttons[5]?.pressed || gamepad.buttons[11]?.pressed) {\r\n    //         rightDown = true;\r\n    //     }\r\n\r\n    //     // Analog stick left or right\r\n    //     const horizontalAxis = gamepad.axes[0];\r\n    //     if (horizontalAxis < -0.5) {\r\n    //         leftDown = true;\r\n    //     } else if (horizontalAxis > 0.5) {\r\n    //         rightDown = true;\r\n    //     }\r\n\r\n    //     // Non-directional buttons\r\n    //     if (gamepad.buttons[0]?.pressed || gamepad.buttons[1]?.pressed || gamepad.buttons[2]?.pressed \r\n    //             || gamepad.buttons[3]?.pressed || gamepad.buttons[6]?.pressed || gamepad.buttons[7]?.pressed \r\n    //             || gamepad.buttons[8]?.pressed || gamepad.buttons[9]?.pressed) {\r\n    //         fireDown = true;\r\n    //     }\r\n    // }\r\n\r\n    // if (leftDown) {\r\n    //     if (!lastLeftGamepadDown) {            \r\n    //         leftKeyPressed = rightKeyPressed + 1;\r\n    //     }\r\n    // } else if (lastLeftGamepadDown) {\r\n    //     leftKeyPressed = 0;\r\n    // }\r\n    // lastLeftGamepadDown = leftDown;\r\n\r\n    // if (rightDown) {\r\n    //     if (!lastRightGamepadDown) {            \r\n    //         rightKeyPressed = leftKeyPressed + 1;\r\n    //     }\r\n    // } else if (lastRightGamepadDown) {\r\n    //     rightKeyPressed = 0;\r\n    // }\r\n    // lastRightGamepadDown = rightDown;\r\n\r\n    // if (fireDown) {\r\n    //     if (!lastFireGamepadDown) {\r\n    //         fireKeyPressed = true;\r\n    //     }\r\n    // } else if (lastFireGamepadDown) {\r\n    //     fireKeyPressed = false;\r\n    // }\r\n    // lastFireGamepadDown = fireDown;\r\n}\r\n\r\nexport function isLeftPressed(): boolean {\r\n    return leftKeyPressed > rightKeyPressed;\r\n}\r\n\r\nexport function isRightPressed(): boolean {\r\n    return rightKeyPressed > leftKeyPressed;\r\n}\r\n\r\nexport function isUpPressed(): boolean {\r\n    return upKeyPressed > downKeyPressed;\r\n}\r\n\r\nexport function isDownPressed(): boolean {\r\n    return downKeyPressed > upKeyPressed;\r\n}\r\n\r\nexport function isJumpPressed(): boolean {\r\n    return jumpKeyPressed;\r\n}\r\n\r\nfunction cancelHideCursorTimer() {\r\n    if (hideCursorTimeoutId !== null) {\r\n        clearTimeout(hideCursorTimeoutId);\r\n        hideCursorTimeoutId = null;\r\n    }\r\n\r\n    if (cursorHidden) {\r\n        document.body.style.cursor = 'default';\r\n        cursorHidden = false;\r\n    }\r\n}\r\n\r\nfunction resetHideCursorTimer() {\r\n    cancelHideCursorTimer();\r\n\r\n    hideCursorTimeoutId = window.setTimeout(() => {\r\n        document.body.style.cursor = 'none';\r\n        cursorHidden = true;\r\n    }, 3000);\r\n}\r\n\r\nfunction onTouch(e: TouchEvent) {\r\n    e.preventDefault();    \r\n\r\n    const innerWidth = window.innerWidth;\r\n    const innerHeight = window.innerHeight;\r\n    const landscape = innerWidth >= innerHeight;\r\n\r\n    for (let i = e.changedTouches.length - 1; i >= 0; --i) {\r\n        const t = e.changedTouches[i];\r\n        let x: number;\r\n        let y: number;\r\n        if (landscape) {\r\n            x = t.clientX;\r\n            y = t.clientY;\r\n        } else {\r\n            x = innerHeight - 1 - t.clientY;\r\n            y = t.clientX;\r\n        }\r\n        switch (e.type) {\r\n            case 'touchstart': {\r\n                const touchData = new TouchData();\r\n                touchData.timestampDown = Date.now();\r\n                touchData.xDown = touchData.x = x;\r\n                touchData.yDown = touchData.y = y;\r\n                touchDatas.set(t.identifier, touchData);\r\n                break;\r\n            }\r\n            case 'touchmove': {\r\n                resetHideCursorTimer();\r\n                const touchData = touchDatas.get(t.identifier);\r\n                if (touchData) {\r\n                    touchData.x = x;\r\n                    touchData.y = y;\r\n                }\r\n                break;\r\n            }\r\n            case 'touchend':\r\n            case 'touchcancel': {\r\n                const touchData = touchDatas.get(t.identifier);\r\n                if (touchData) {\r\n                    if (x < 64 && y < 64 && touchData.xDown < 64 && touchData.yDown < 64) {\r\n                        exit();\r\n                    } \r\n                    touchDatas.delete(t.identifier);\r\n                }              \r\n                break;\r\n            }\r\n        }\r\n    }\r\n    \r\n    let td: TouchData | null = null;\r\n    for (const [ identifier, touchData ] of Array.from(touchDatas)) {\r\n        if (!td || touchData.timestampDown > td.timestampDown) {\r\n            td = touchData;\r\n        }\r\n        outer: {\r\n            for (let i = e.touches.length - 1; i >= 0; --i) {\r\n                const t = e.touches[i];\r\n                if (t.identifier === identifier) {\r\n                    break outer;\r\n                }      \r\n            }\r\n            touchDatas.delete(identifier);\r\n        }\r\n    }\r\n    // if (td) {\r\n    //     if (td.x < innerWidth / 2) {\r\n    //         leftScreenTouched = true;\r\n    //         rightScreenTouched = false;\r\n    //     } else {\r\n    //         leftScreenTouched = false;\r\n    //         rightScreenTouched = true;\r\n    //     }\r\n    // } else {\r\n    //     leftScreenTouched = rightScreenTouched = false;\r\n    // }\r\n}\r\n\r\nfunction onClick(e: MouseEvent) {\r\n    if (!(e.clientX && e.clientY)) {\r\n        return;\r\n    }\r\n\r\n    const innerWidth = window.innerWidth;\r\n    const innerHeight = window.innerHeight;\r\n    let x: number;\r\n    let y: number;\r\n    if (innerWidth >= innerHeight) {\r\n        x = e.clientX;\r\n        y = e.clientY;\r\n    } else {\r\n        x = innerHeight - 1 - e.clientY;\r\n        y = e.clientX;\r\n    }\r\n\r\n    if (x < 64 && y < 64) {\r\n        exit();\r\n    }\r\n}\r\n\r\nfunction onKeyDown(e: KeyboardEvent) {\r\n    switch(e.code) {\r\n        case 'KeyA':\r\n        case 'ArrowLeft':\r\n            leftKeyPressed = rightKeyPressed + 1;\r\n            break;\r\n        case 'KeyD':\r\n        case 'ArrowRight':\r\n            rightKeyPressed = leftKeyPressed + 1;\r\n            break;\r\n        case 'KeyW':\r\n        case 'ArrowUp':\r\n            upKeyPressed = downKeyPressed + 1;\r\n            break;\r\n        case 'KeyS':\r\n        case 'ArrowDown':\r\n            downKeyPressed = upKeyPressed + 1;\r\n            break;            \r\n        case 'Escape':\r\n            exit();\r\n            break;    \r\n        default:\r\n            jumpKeyPressed = true;\r\n            break;            \r\n    }\r\n}\r\n\r\nfunction onKeyUp(e: KeyboardEvent) {\r\n    switch(e.code) {\r\n        case 'KeyA':\r\n        case 'ArrowLeft':\r\n            leftKeyPressed = 0;\r\n            break;\r\n        case 'KeyD':\r\n        case 'ArrowRight':\r\n            rightKeyPressed = 0;\r\n            break;\r\n        case 'KeyW':\r\n        case 'ArrowUp':\r\n            upKeyPressed = 0;\r\n            break;\r\n        case 'KeyS':\r\n        case 'ArrowDown':\r\n            downKeyPressed = 0;\r\n            break;                  \r\n        case 'Escape':\r\n            break;\r\n        default:\r\n            jumpKeyPressed = false;\r\n            break;            \r\n    }\r\n}","import { Mask } from './graphics';\r\n\r\nexport const TAU = 2 * Math.PI;\r\n\r\n// TODO REMOVE\r\nexport function gaussianRandom(mean: number, stdDev: number): number {\r\n    let u: number;\r\n    let v: number;\r\n    do {\r\n        u = Math.random();\r\n    } while (u === 0);\r\n    do {\r\n        v = Math.random();\r\n    } while(v === 0);\r\n    return (Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v)) * stdDev + mean;\r\n}\r\n\r\nexport function clamp(value: number, min: number, max: number) {\r\n    return (value < min) ? min : (value > max) ? max : value;\r\n}\r\n\r\nexport function mod(n: number, m: number): number {\r\n    return ((n % m) + m) % m;\r\n}\r\n\r\n// TODO REMOVE\r\nexport function bulletIntersects(\r\n        bulletX: number, bulletY: number, bulletHeight: number,\r\n        mask: Mask, maskX: number, maskY: number): boolean {\r\n\r\n    maskX = Math.floor(maskX);\r\n    maskY = Math.floor(maskY);                    \r\n    bulletX = Math.floor(bulletX) - maskX;\r\n    bulletY = Math.floor(bulletY) - maskY;\r\n \r\n    const maskMaxX = mask[0].length - 1;\r\n    const maskMaxY = mask.length - 1;\r\n    const bulletMaxY = bulletY + bulletHeight - 1;\r\n    \r\n    if (bulletMaxY < 0 || bulletX < 0 || bulletY > maskMaxY || bulletX > maskMaxX) {\r\n        return false;\r\n    }\r\n\r\n    const yMax = Math.min(bulletMaxY, maskMaxY);\r\n    for (let y = Math.max(bulletY, 0); y <= yMax; ++y) {\r\n        if (mask[y][bulletX]) {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nexport function spritesIntersect(\r\n        mask0: Mask, x0: number, y0: number,\r\n        mask1: Mask, x1: number, y1: number): boolean {\r\n\r\n    x0 = Math.floor(x0);\r\n    y0 = Math.floor(y0);        \r\n    const width0 = mask0[0].length;\r\n    const height0 = mask0.length;\r\n    const xMax0 = width0 - 1;\r\n    const yMax0 = height0 - 1;\r\n\r\n    x1 = Math.floor(x1) - x0;\r\n    y1 = Math.floor(y1) - y0;    \r\n    const width1 = mask1[0].length;\r\n    const height1 = mask1.length;\r\n    const xMax1 = x1 + width1 - 1;\r\n    const yMax1 = y1 + height1 - 1;\r\n    \r\n    if (yMax1 < 0 || yMax0 < y1 || xMax1 < 0 || xMax0 < x1) {\r\n        return false;\r\n    }\r\n\r\n    const xMin = Math.max(0, x1);\r\n    const xMax = Math.min(xMax0, xMax1);\r\n    const yMin = Math.max(0, y1);\r\n    const yMax = Math.min(yMax0, yMax1);\r\n    for (let y = yMin; y <= yMax; ++y) {\r\n        for (let x = xMin; x <= xMax; ++x) {\r\n            if (mask0[y][x]) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n\r\n    return false;\r\n}","import { download } from \"./download\";\nimport { decodeAudioData, waitForDecodes } from \"./sfx\";\nimport { enter as enterStart } from \"./start\";\nimport { loadStore } from \"./store\";\nimport { init as initGraphics } from './graphics';\n\nlet landscape = false;\nlet progressBar: HTMLProgressElement;\n\nexport function enter() {\n    window.addEventListener('resize', windowResized);\n    window.addEventListener('touchmove', onTouchMove, { passive: false });\n\n    const mainElement = document.getElementById('main-content') as HTMLElement;\n    mainElement.innerHTML = `\n            <div id=\"progress-container\">\n                <div id=\"progress-div\">\n                    <progress id=\"loading-progress\" value=\"0\" max=\"100\"></progress>\n                </div>\n            </div>`;\n    progressBar = document.getElementById('loading-progress') as HTMLProgressElement;\n\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.addEventListener('message', messageReceived);\n    }\n\n    windowResized();\n\n    download('resources.zip', frac => {\n        progressBar.value = 100 * frac;\n        setProgressBarColor('#0075FF');\n    }).then(onDownload);\n}\n\nexport function exit() {\n    window.removeEventListener('resize', windowResized);\n    window.removeEventListener('touchmove', onTouchMove);\n\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.removeEventListener('message', messageReceived);\n    }\n}\n\nfunction setProgressBarColor(color: string) {\n\n    if (progressBar) {\n        if (color === progressBar.style.color) {\n            return;\n        }\n        progressBar.style.color = color;\n    }\n\n    const styleId: string = 'progress-bar-style';\n\n    let styleSheet: HTMLStyleElement | null = document.getElementById(styleId) as HTMLStyleElement;\n\n    if (!styleSheet) {\n        styleSheet = document.createElement(\"style\");\n        styleSheet.id = styleId;\n        document.head.appendChild(styleSheet);\n    }\n\n    styleSheet.innerText = `\n        #loading-progress::-webkit-progress-value {\n            background-color: ${color} !important;\n        }\n        #loading-progress::-moz-progress-bar {\n            background-color: ${color} !important;\n        }\n    `;\n}\n\nfunction messageReceived(e: MessageEvent<number>) {\n    if (progressBar) {\n        progressBar.value = 100 * e.data;\n        setProgressBarColor('#48D800');\n    }\n}\n\nfunction onDownload(arrayBuffer: Uint8Array) {\n    import(/* webpackChunkName: \"jszip\" */ 'jszip').then(({ default: JSZip }) => {\n        new JSZip().loadAsync(arrayBuffer).then(zip => Object.entries(zip.files).forEach(entry => {\n            const [ filename, fileData ] = entry;\n            if (fileData.dir) {\n                return;\n            }\n            if (filename.endsWith('.mp3')) {\n                decodeAudioData(filename, fileData);\n            }\n        }));\n    });\n\n    waitForDecodes().then(() => {\n        (document.getElementById('loading-progress') as HTMLProgressElement).value = 100;\n        setTimeout(() => {\n            loadStore();\n            initGraphics().then(() => {\n                exit();\n                enterStart();\n            });\n        }, 10);\n    });\n}\n\nfunction onTouchMove(e: TouchEvent) {\n    e.preventDefault();\n}\n\nfunction windowResized() {\n    const progressContainer = document.getElementById('progress-container') as HTMLDivElement;\n    const progressDiv = document.getElementById('progress-div') as HTMLDivElement;\n\n    progressContainer.style.width = progressContainer.style.height = '';\n    progressContainer.style.left = progressContainer.style.top = '';\n    progressContainer.style.display = 'none';\n\n    progressDiv.style.top = progressDiv.style.left = progressDiv.style.transform = '';\n    progressDiv.style.display = 'none';\n\n    const innerWidth = window.innerWidth;\n    const innerHeight = window.innerHeight;\n    landscape = (innerWidth >= innerHeight);\n\n    progressContainer.style.left = '0px';\n    progressContainer.style.top = '0px';\n    progressContainer.style.width = `${innerWidth}px`;\n    progressContainer.style.height = `${innerHeight}px`;\n    progressContainer.style.display = 'block';\n\n    progressDiv.style.display = 'flex';\n\n    if (landscape) {\n        const rect = progressDiv.getBoundingClientRect();\n        progressDiv.style.left = `${(innerWidth - rect.width) / 2}px`\n        progressDiv.style.top = `${(innerHeight - rect.height) / 2}px`;\n    } else {\n        progressDiv.style.transform = 'rotate(-90deg)';\n        const rect = progressDiv.getBoundingClientRect();\n        progressDiv.style.left = `${(innerWidth - rect.height) / 2}px`\n        progressDiv.style.top = `${(innerHeight - rect.width) / 2}px`;\n    }\n}","import { startAnimation, stopAnimation } from './animate';\nimport { acquireWakeLock, releaseWakeLock } from './wake-lock';\nimport { NoParamVoidFunc } from './no-param-void-func';\nimport { enter as enterStart } from './start';\nimport { PhysicalDimensions, Resolution } from './graphics';\nimport { startInput, stopInput, resetInput } from './input';\nimport { renderScreen, resetGame, saveGame } from './game/game';\n\nexport let dpr: number;\n\nlet mainCanvas: HTMLCanvasElement;\nlet mainCtx: CanvasRenderingContext2D | null;\nlet mainCanvasWidth: number;\nlet mainCanvasHeight: number;\n\nlet screenCanvas: OffscreenCanvas;\nlet ctx: OffscreenCanvasRenderingContext2D | null;\n\nlet removeMediaEventListener: NoParamVoidFunc | null = null;\nlet exiting = false;\n\nlet screenWidth: number;\nlet screenHeight: number;\nlet screenX: number;\nlet screenY: number;\n\nfunction updatePixelRatio() {\n    if (removeMediaEventListener !== null) {\n        removeMediaEventListener();\n        removeMediaEventListener = null;\n    }\n\n    if (exiting) {\n        return;\n    }\n\n    const media = matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);\n    media.addEventListener(\"change\", updatePixelRatio);\n    removeMediaEventListener = () => media.removeEventListener(\"change\", updatePixelRatio);\n\n    onWindowResized();\n};\n\nexport function enter() {\n    exiting = false;\n\n    resetGame();\n\n    document.body.style.backgroundColor = '#C2BCB1';\n\n    screenCanvas = new OffscreenCanvas(Resolution.WIDTH, Resolution.HEIGHT);\n    ctx = screenCanvas.getContext('2d');\n\n    const mainElement = document.getElementById(\"main-content\") as HTMLElement;\n    mainElement.innerHTML = `<canvas id=\"main-canvas\" class=\"canvas\" width=\"1\" height=\"1\"></canvas>`;\n    mainCanvas = document.getElementById(\"main-canvas\") as HTMLCanvasElement;\n    mainCanvas.style.touchAction = 'none';\n\n    window.addEventListener('beforeunload', onBeforeUnload);\n    window.addEventListener('resize', onWindowResized);    \n    window.addEventListener('focus', onVisibilityChanged);\n    window.addEventListener('blur', onVisibilityChanged);\n    document.addEventListener('visibilitychange', onVisibilityChanged);\n    \n    acquireWakeLock();\n    updatePixelRatio();\n    startInput();\n    startAnimation();\n}\n\nfunction cleanUp() {\n    if (exiting) {\n        return;\n    }\n\n    exiting = true;\n    stopAnimation();\n    stopInput();\n    releaseWakeLock();\n    \n    window.removeEventListener('beforeunload', onBeforeUnload);\n    window.removeEventListener('resize', onWindowResized);    \n    window.removeEventListener('focus', onVisibilityChanged);\n    window.removeEventListener('blur', onVisibilityChanged);\n    document.removeEventListener('visibilitychange', onVisibilityChanged);\n\n    if (removeMediaEventListener !== null) {\n        removeMediaEventListener();\n        removeMediaEventListener = null;\n    }\n\n    saveGame();\n}\n\nexport function exit() {\n    cleanUp();\n    enterStart();\n}\n\nexport function render() {\n    if (!mainCtx) {\n        onWindowResized();\n        return;\n    }\n    if (!ctx) {\n        return;\n    }\n    \n    mainCtx.imageSmoothingEnabled = false;\n    mainCtx.fillStyle = '#0F0F0F';    \n    mainCtx.fillRect(0, 0, mainCanvasWidth, mainCanvasHeight);\n\n    ctx.imageSmoothingEnabled = false;\n    renderScreen(ctx);\n\n    mainCtx.drawImage(screenCanvas, screenX, screenY, screenWidth, screenHeight);\n\n    // hamburger icon\n    mainCtx.imageSmoothingEnabled = true;\n    mainCtx.fillStyle = '#FFFFFF';    \n    mainCtx.fillRect(27, 21, 18, 1);\n    mainCtx.fillRect(27, 27, 18, 1);\n    mainCtx.fillRect(27, 33, 18, 1);\n}\n\nfunction onWindowResized() {\n\n    if (exiting) {\n        return;\n    }\n\n    mainCtx = null;\n    mainCanvas = document.getElementById(\"main-canvas\") as HTMLCanvasElement;\n    mainCanvas.style.display = 'none';\n\n    const innerWidth = window.innerWidth;\n    const innerHeight = window.innerHeight;\n\n    mainCanvas.style.display = 'block';\n    mainCanvas.style.width = `${innerWidth}px`;\n    mainCanvas.style.height = `${innerHeight}px`;    \n    mainCanvas.style.position = 'absolute';\n    mainCanvas.style.left = '0px';\n    mainCanvas.style.top = '0px';\n\n    dpr = window.devicePixelRatio || 1;\n    mainCanvas.width = Math.floor(dpr * innerWidth);\n    mainCanvas.height = Math.floor(dpr * innerHeight);\n\n    const transform = new DOMMatrix();\n    if (innerWidth >= innerHeight) {\n        // Landscape mode\n        mainCanvasWidth = innerWidth;\n        mainCanvasHeight = innerHeight;\n        transform.a = transform.d = dpr;\n        transform.b = transform.c = transform.e = transform.f = 0;\n    } else {\n        // Portrait mode\n        mainCanvasWidth = innerHeight;\n        mainCanvasHeight = innerWidth;\n        transform.a = transform.d = transform.e = 0;\n        transform.c = dpr;\n        transform.b = -transform.c;        \n        transform.f = dpr * innerHeight;\n    }\n\n    mainCtx = mainCanvas.getContext('2d');\n    if (!mainCtx) {\n        return;\n    }\n    mainCtx.setTransform(transform);\n\n    screenHeight = mainCanvasHeight;\n    screenWidth = screenHeight * PhysicalDimensions.WIDTH / PhysicalDimensions.HEIGHT;\n    if (screenWidth > mainCanvasWidth) {\n        screenWidth = mainCanvasWidth;\n        screenHeight = screenWidth * PhysicalDimensions.HEIGHT / PhysicalDimensions.WIDTH;\n        screenX = 0;\n        screenY = Math.round((mainCanvasHeight - screenHeight) / 2);\n    } else {\n        screenX = Math.round((mainCanvasWidth - screenWidth) / 2);\n        screenY = 0;\n    }\n\n    render();\n}\n\nfunction onVisibilityChanged() {\n    if (!exiting && document.visibilityState === 'visible' && document.hasFocus()) {\n        acquireWakeLock();\n        resetInput();\n        startAnimation();        \n    } else {\n        stopAnimation();\n    }\n}\n\nfunction onBeforeUnload() {\n    cleanUp();    \n}","import { JSZipObject } from \"jszip\";\r\n\r\nconst audioContext = new AudioContext();\r\n\r\nlet docVisible = true;\r\n\r\ndocument.addEventListener('visibilitychange', () => {\r\n    if (document.visibilityState === 'visible') {\r\n        docVisible = true;\r\n        if (audioContext.state === 'suspended') {\r\n            audioContext.resume();\r\n        }\r\n    } else if (document.visibilityState === 'hidden') {\r\n        docVisible = false;\r\n        if (audioContext.state === 'running') {\r\n            audioContext.suspend();\r\n        }\r\n    }\r\n});\r\n\r\nconst masterGain = audioContext.createGain();\r\nmasterGain.connect(audioContext.destination);\r\nmasterGain.gain.value = 0.1;\r\n\r\nconst promises: Promise<Map<string, AudioBuffer>>[] = [];\r\n\r\nconst audioBuffers = new Map<string, AudioBuffer>();\r\n\r\nexport function getVolume() {\r\n    return 100 * masterGain.gain.value;\r\n}\r\n\r\nexport function setVolume(volume: number) {\r\n    masterGain.gain.value = volume / 100;\r\n}\r\n\r\nexport function decodeAudioData(name: string, obj: JSZipObject) {\r\n    promises.push(obj.async('arraybuffer')\r\n        .then(data => audioContext.decodeAudioData(data))\r\n        .then(buffer => audioBuffers.set(name, buffer)));\r\n}\r\n\r\nexport async function waitForDecodes() {\r\n    return Promise.all(promises).then(() => promises.length = 0);\r\n}\r\n\r\nexport function playSoundEffect(name: string) {\r\n    if (audioContext.state === 'suspended') {\r\n        if (docVisible) {\r\n            audioContext.resume().then(() => playSoundEffect(name));\r\n        }\r\n        return;\r\n    }\r\n\r\n    const source = audioContext.createBufferSource();\r\n    source.buffer = audioBuffers.get(name) as AudioBuffer;\r\n    source.connect(masterGain);\r\n    source.start();\r\n}","import { setVolume } from './sfx';\r\nimport { enter as enterGame } from './screen';\r\nimport { store, saveStore } from './store';\r\n\r\nlet landscape = false;\r\n\r\nexport function enter() {\r\n    document.body.style.backgroundColor = '#0F0F0F';\r\n\r\n    window.addEventListener('resize', windowResized);\r\n    window.addEventListener('touchmove', onTouchMove, { passive: false });\r\n\r\n    const mainElement = document.getElementById('main-content') as HTMLElement;\r\n    mainElement.innerHTML = `\r\n            <div id=\"start-container\">\r\n                <div id=\"start-div\">\r\n                    <div id=\"high-score-div\">High Score: ${store.highScore}</div>\r\n                    <div class=\"volume-div\">\r\n                        <span class=\"left-volume-label material-icons\" id=\"left-volume-span\" \r\n                                lang=\"en\">volume_mute</span>\r\n                        <input type=\"range\" id=\"volume-input\" min=\"0\" max=\"100\" step=\"any\" value=\"10\">\r\n                        <span class=\"right-volume-label\" id=\"right-volume-span\" lang=\"en\">100</span>\r\n                    </div>\r\n                    <div class=\"checkboxes-div\">\r\n                        <div class=\"checkbox-item\">\r\n                            <input type=\"checkbox\" id=\"autofire-checkbox\" name=\"autofire-checkbox\">\r\n                            <label for=\"autofire-checkbox\">\r\n                                <span class=\"custom-checkbox\"></span>\r\n                                Autofire\r\n                            </label>\r\n                        </div>\r\n                        <div class=\"checkbox-item\">\r\n                            <input type=\"checkbox\" id=\"tracer-checkbox\" name=\"tracer-checkbox\">\r\n                            <label for=\"tracer-checkbox\">\r\n                                <span class=\"custom-checkbox\"></span>\r\n                                Tracer\r\n                            </label>\r\n                        </div>\r\n                        <div class=\"checkbox-item\">\r\n                            <input type=\"checkbox\" id=\"fast-checkbox\" name=\"fast-checkbox\">\r\n                            <label for=\"fast-checkbox\">\r\n                                <span class=\"custom-checkbox\"></span>\r\n                                Fast\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                    <div id=\"go-div\">\r\n                        <button id=\"start-button\">${isNewGame() ? 'Start' : 'Continue'}</button>\r\n                    </div>\r\n                </div>\r\n            </div>`;\r\n\r\n    setVolume(store.volume);\r\n    const volumeInput = document.getElementById('volume-input') as HTMLInputElement;\r\n    volumeInput.addEventListener('input', volumeChanged);\r\n    volumeInput.value = String(store.volume);\r\n\r\n    const autofireCheckbox = document.getElementById('autofire-checkbox') as HTMLInputElement;\r\n    autofireCheckbox.checked = store.autofire;\r\n\r\n    const tracerCheckbox = document.getElementById('tracer-checkbox') as HTMLInputElement;\r\n    tracerCheckbox.checked = store.tracer;\r\n\r\n    const fastCheckbox = document.getElementById('fast-checkbox') as HTMLInputElement;\r\n    fastCheckbox.checked = store.fast;\r\n\r\n    const startButton = document.getElementById('start-button') as HTMLButtonElement;\r\n    startButton.addEventListener('click', startButtonClicked);\r\n\r\n    windowResized();\r\n}\r\n\r\nexport function exit() {\r\n    window.removeEventListener('resize', windowResized);\r\n    window.removeEventListener('touchmove', onTouchMove);\r\n\r\n    const volumeInput = document.getElementById('volume-input') as HTMLInputElement;\r\n    volumeInput.removeEventListener('input', volumeChanged);\r\n\r\n    const startButton = document.getElementById('start-button') as HTMLButtonElement;\r\n    startButton.removeEventListener('click', startButtonClicked);\r\n\r\n    const autofireCheckbox = document.getElementById('autofire-checkbox') as HTMLInputElement;\r\n    store.autofire = autofireCheckbox.checked;\r\n\r\n    const tracerCheckbox = document.getElementById('tracer-checkbox') as HTMLInputElement;\r\n    store.tracer = tracerCheckbox.checked;\r\n    \r\n    const fastCheckbox = document.getElementById('fast-checkbox') as HTMLInputElement;\r\n    store.fast = fastCheckbox.checked;\r\n    \r\n    saveStore();\r\n}\r\n\r\nfunction startButtonClicked() {\r\n    setVolume(store.volume);\r\n\r\n    const autofireCheckbox = document.getElementById('autofire-checkbox') as HTMLInputElement;\r\n    store.autofire = autofireCheckbox.checked;\r\n\r\n    const tracerCheckbox = document.getElementById('tracer-checkbox') as HTMLInputElement;\r\n    store.tracer = tracerCheckbox.checked;\r\n\r\n    const fastCheckbox = document.getElementById('fast-checkbox') as HTMLInputElement;\r\n    store.fast = fastCheckbox.checked;\r\n    \r\n    exit();\r\n    enterGame();\r\n}\r\n\r\nfunction onTouchMove(e: TouchEvent) {\r\n    let target = e.target as HTMLElement | null;\r\n    while (target !== null) {\r\n        if (target.id === 'volume-input') {\r\n            if (landscape) {\r\n                return;\r\n            }\r\n\r\n            const volumeInput = target as HTMLInputElement;\r\n            const max = parseFloat(volumeInput.max);\r\n            const min = parseFloat(volumeInput.min);\r\n            const rect = volumeInput.getBoundingClientRect();\r\n            const value = (1 - ((e.touches[0].clientY - rect.top) / rect.height)) * (max - min) + min;\r\n            volumeInput.value = value.toString();\r\n            volumeInput.dispatchEvent(new Event('input'));\r\n            return;\r\n        }\r\n        target = target.parentElement;\r\n    }\r\n    e.preventDefault();\r\n}\r\n\r\nfunction volumeChanged() {\r\n    const leftVolumeSpan = document.getElementById('left-volume-span') as HTMLSpanElement;\r\n    const volumeInput = document.getElementById('volume-input') as HTMLInputElement;\r\n    const rightVolumeSpan = document.getElementById('right-volume-span') as HTMLSpanElement;\r\n\r\n    store.volume = 100 * (+volumeInput.value - +volumeInput.min) / (+volumeInput.max - +volumeInput.min);\r\n    volumeInput.style.setProperty('--thumb-position', `${store.volume}%`);\r\n\r\n    if (store.volume === 0) {\r\n        leftVolumeSpan.textContent = 'volume_off';\r\n    } else if (store.volume < 33) {\r\n        leftVolumeSpan.textContent = 'volume_mute';\r\n    } else if (store.volume < 66) {\r\n        leftVolumeSpan.textContent = 'volume_down';\r\n    } else {\r\n        leftVolumeSpan.textContent = 'volume_up';\r\n    }\r\n\r\n    rightVolumeSpan.textContent = String(Math.round(store.volume));\r\n}\r\n\r\nfunction windowResized() {\r\n    const startContainer = document.getElementById('start-container') as HTMLDivElement;\r\n    const startDiv = document.getElementById('start-div') as HTMLDivElement;\r\n    const leftVolumeSpan = document.getElementById('left-volume-span') as HTMLSpanElement;\r\n    const rightVolumeSpan = document.getElementById('right-volume-span') as HTMLSpanElement;\r\n\r\n    startContainer.style.width = startContainer.style.height = '';\r\n    startContainer.style.left = startContainer.style.top = '';\r\n    startContainer.style.display = 'none';\r\n\r\n    startDiv.style.left = startDiv.style.top = startDiv.style.transform = '';\r\n    startDiv.style.display = 'none';\r\n\r\n    const innerWidth = window.innerWidth;\r\n    const innerHeight = window.innerHeight;\r\n    landscape = (innerWidth >= innerHeight);\r\n\r\n    startContainer.style.left = '0px';\r\n    startContainer.style.top = '0px';\r\n    startContainer.style.width = `${innerWidth}px`;\r\n    startContainer.style.height = `${innerHeight}px`;\r\n    startContainer.style.display = 'block';\r\n\r\n    startDiv.style.display = 'flex';\r\n\r\n    leftVolumeSpan.style.width = '';\r\n    leftVolumeSpan.style.display = 'inline-block';\r\n    leftVolumeSpan.style.textAlign = 'center';\r\n    leftVolumeSpan.textContent = '\\u{1F507}';\r\n    leftVolumeSpan.style.transform = '';\r\n\r\n    rightVolumeSpan.style.width = '';\r\n    rightVolumeSpan.style.display = 'inline-block';\r\n    rightVolumeSpan.style.textAlign = 'center';\r\n    rightVolumeSpan.textContent = '100';\r\n\r\n    if (landscape) {\r\n        const leftVolumeSpanWidth = leftVolumeSpan.getBoundingClientRect().width;\r\n        leftVolumeSpan.style.width = `${leftVolumeSpanWidth}px`;\r\n\r\n        const rightVolumeSpanWidth = rightVolumeSpan.getBoundingClientRect().width;\r\n        rightVolumeSpan.style.width = `${rightVolumeSpanWidth}px`;\r\n\r\n        const rect = startDiv.getBoundingClientRect();\r\n        startDiv.style.left = `${(innerWidth - rect.width) / 2}px`\r\n        startDiv.style.top = `${(innerHeight - rect.height) / 2}px`;\r\n    } else {\r\n        const leftVolumeSpanHeight = leftVolumeSpan.getBoundingClientRect().height;\r\n        leftVolumeSpan.style.width = `${leftVolumeSpanHeight}px`;\r\n\r\n        const rightVolumeSpanHeight = rightVolumeSpan.getBoundingClientRect().height;\r\n        rightVolumeSpan.style.width = `${rightVolumeSpanHeight}px`;\r\n\r\n        startDiv.style.transform = 'rotate(-90deg)';\r\n        const rect = startDiv.getBoundingClientRect();\r\n        startDiv.style.left = `${(innerWidth - rect.height) / 2}px`\r\n        startDiv.style.top = `${(innerHeight - rect.width) / 2}px`;\r\n    }\r\n    rightVolumeSpan.textContent = String(store.volume);\r\n\r\n    volumeChanged();\r\n}\r\n\r\nfunction isNewGame() {\r\n    return true; // TODO\r\n}","import { isTouchOnlyDevice } from './input';\r\n\r\nexport const LOCAL_STORAGE_KEY = 'pitfall-store';\r\n\r\nexport class Store {\r\n    highScore = 0;\r\n    \r\n    volume = 10;\r\n\r\n    autofire = isTouchOnlyDevice();\r\n    tracer = false;\r\n    fast = false;\r\n   \r\n\r\n}\r\n\r\nexport let store: Store;\r\n\r\nexport function saveStore() {\r\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(store));\r\n}\r\n\r\nexport function loadStore() {\r\n    if (store) {\r\n        return;\r\n    }\r\n\r\n    const str = localStorage.getItem(LOCAL_STORAGE_KEY);\r\n    if (str) {\r\n        try {\r\n            store = JSON.parse(str) as Store;\r\n        } catch {\r\n            store = new Store();            \r\n        }\r\n    } else {\r\n        store = new Store();\r\n    }\r\n}","let wakeLock: WakeLockSentinel | null = null;\r\nlet acquiringWaitLock = false;\r\n\r\nexport function acquireWakeLock() {\r\n    if (!acquiringWaitLock && wakeLock === null && 'wakeLock' in navigator) {\r\n        acquiringWaitLock = true;\r\n        navigator.wakeLock.request('screen')\r\n            .then(w => {\r\n                if (acquiringWaitLock) {\r\n                    wakeLock = w;\r\n                    wakeLock.addEventListener(\"release\", () => {\r\n                        if (!acquiringWaitLock) {\r\n                            wakeLock = null;\r\n                        }\r\n                    });\r\n                }\r\n            }).catch(_ => {\r\n        }).finally(() => acquiringWaitLock = false);\r\n    }\r\n}\r\n\r\nexport function releaseWakeLock() {\r\n    if (wakeLock !== null && 'wakeLock' in navigator) {\r\n        acquiringWaitLock = false;\r\n        wakeLock.release()\r\n            .then(() => {\r\n                if (!acquiringWaitLock) {\r\n                    wakeLock = null;\r\n                }\r\n            }).catch(_ => {\r\n        });\r\n    }\r\n}"],"names":[],"sourceRoot":""}